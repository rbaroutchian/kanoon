{% extends 'base.html' %}
{% block page_title %}

{% endblock %}

{% block page_content %}
            <div class="page-container">
                <h2 class="page-title">ثبت‌نام در کلاس‌های کانون</h2>
                <p>برای پیش‌ثبت‌نام در کلاس‌های مورد نظر، فرم زیر را پر کنید. همکاران ما در اسرع وقت با شما تماس خواهند گرفت تا مراحل نهایی ثبت‌نام را انجام دهند.</p>

{#                <div class="ticket-limits">#}
{#                    <p><i class="fas fa-info-circle"></i> توجه: برای ثبت‌نام در کلاس‌ها نیاز به ورود به حساب کاربری دارید. اگر حساب کاربری ندارید، ابتدا <a href="#"  style="color: var(--accent-color); font-weight: 600;">ثبت‌نام</a> کنید.</p>#}
{#                </div>#}

                <div class="form-container">
                    <form method="post">
                    {% csrf_token %}
                        <div class="form-group">
{#                            <label for="courseSelect">انتخاب کلاس مورد نظر:</label>#}
{#                            <select id="courseSelect" name="product_choice" class="form-control" required>#}
{#                                <option value="">یک کلاس را انتخاب کنید</option>#}
{#                                {% for p in products %}#}
{#                                     <option value="{{ p.id }}" {% if form.product_choice.value == p.id %}selected{% endif %}>{{ p.title }}</option>#}
{#                                {% endfor %}#}
{##}
{#                            </select>#}

                                <label>کلاس انتخاب شده:</label>
                                {% if selected_product %}
                                    <div class="form-control" readonly>{{ selected_product.title }}</div>
                                    <input type="hidden" name="product_choice" value="{{ selected_product.id }}">
                                {% else %}
                                    <div class="form-control" readonly>کلاسی انتخاب نشده</div>
                                {% endif %}
                        </div>

                        <div class="form-group">
                            <label for="childName">نام فرزند:</label>
                            <input type="text" id="childName" name="std_name" class="form-control" required placeholder="نام فرزند خود را وارد کنید">
                        </div>

                        <div class="form-group">
                            <label for="childName">نام خانوادگی فرزند:</label>
                            <input type="text" id="childName" name="std_lastname" class="form-control" required placeholder="نام خانوادگی فرزند خود را وارد کنید">
                        </div>

                        <div class="form-group">
                            <label for="childAge">سن فرزند:</label>
                            <select id="childAge" name="age" class="form-control" required>
                                <option value="">یک سن را انتخاب کنید</option>
                            {% for value, display in age_choices %}
                                <option value="{{ value }}" {% if form.age.value == value %}selected{% endif %}>{{ display }}</option>
                            {% endfor %}
                             </select>


                        </div>

                        <div class="form-group">
                            <label for="parentName">نام و نام خانوادگی والد:</label>
                            <input type="text" id="parentName" name="parent_name" class="form-control" required placeholder="نام و نام خانوادگی خود را وارد کنید">
                        </div>

                        <div class="form-group">
                            <label for="phone">شماره تماس:</label>
                            <input type="tel" id="phone" name="mobile" class="form-control" required placeholder="۰۹۱۲۳۴۵۶۷۸۹">
                        </div>



                        <div class="form-group">
                            <label for="notes">توضیحات اضافی (اختیاری):</label>
                            <textarea id="notes" name="desc"  class="form-control" rows="3" placeholder="هر گونه توضیح یا سوالی دارید اینجا بنویسید..."></textarea>
                        </div>

                        <button type="submit" class="btn btn-primary btn-block"><i class="fas fa-paper-plane"></i> ثبت درخواست پیش‌ثبت‌نام</button>
                    </form>

                    <div id="registrationResult" style="display: none; margin-top: 30px;">
                        <div class="success-message">
                            <i class="fas fa-check-circle"></i>
                            <h3>درخواست شما با موفقیت ثبت شد</h3>
                            <p>همکاران ما طی ۴۸ ساعت آینده با شما تماس خواهند گرفت.</p>
                            <p style="margin-top: 15px; font-size: 0.9rem; color: #666;">برای پیگیری وضعیت درخواست‌های خود به بخش پروفایل مراجعه کنید.</p>
                        </div>
                    </div>
                </div>
            </div>

{% endblock %}